<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Underworlds Dice Advice</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>
<body>
  <svg version="1.1"
     xmlns="http://www.w3.org/2000/svg"
     id="pattern-defs">
  <defs>
    <pattern id="circle-hatch" patternUnits="userSpaceOnUse" width="8" height="8">
      <circle cx="4" cy="0" r="1" fill="#0009"></circle>
      <circle cx="0" cy="4" r="1" fill="#0009"></circle>
      <circle cx="8" cy="4" r="1" fill="#0009"></circle>
      <circle cx="4" cy="8" r="1" fill="#0009"></circle>
    </pattern>
    <pattern id="diagonal-hatch" patternUnits="userSpaceOnUse" width="4" height="4">
      <path d="M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2" style="stroke:black; stroke-width:1" />
    </pattern>
  </defs>
</svg>
  <div id="app">
    <div id="main-content">
      <h1><span>Dice Advice</span><br><span>for</span><br><span>Warhammer Underworlds</span></h1>
      <div id="description-block">
        <details>
          <summary>Calculate the probabilities of combat outcomes in Warhammer Underworlds.&nbsp;</summary>
          <p>The success target is a conversion of the Underworlds combat dice to a traditional d6; lowering the number improves the accuracy of the attack. For example, lower the number by one for flanking and by two for surrounding.</p>
          <p>Currently we use a Monte Carlo simulation rather than direct probabilistic calculation; we simulate a large number of combats and tally the results. This is easier to implement but gives inexact results, with a higher number of simulations leading to more accuracy. You can specify the number of combats to simulate.</p>
        </details>
      </div>
      <div id="inputs-wrapper">
        <div id="attacker-inputs">
          <h3>Attacker</h3>
          <div class="input-line">
            <label for="attacker-dice">Dice amount</label>
            <div class="input-elements-div">
              <button class="inc-btn" id="attacker-dice-inc">+</button>
              <input type="number" id="attacker-dice" min="1" value="2"/>
              <button class="dec-btn" id="attacker-dice-dec">-</button>
            </div>
          </div>
          <div class="input-line">
            <label for="attacker-target">Success target</label>
            <div class="input-elements-div">
              <button class="inc-btn" id="attacker-target-inc">+</button>
              <select name="attacker-target" id="attacker-target">
                <button>
                  <selectedcontent></selectedcontent>
                </button>
                <option value="6"><span class="target-label">6+</span></option>
                <option value="5"><span class="target-label">5+</span> <span class="target-helper">(swords)</span></option>
                <option value="4" selected><span class="target-label">4+</span> <span class="target-helper">(hammers)</span></option>
                <option value="3"><span class="target-label">3+</span></option>
                <option value="2"><span class="target-label">2+</span></option>
                <option value="1"><span class="target-label">1+</span></option>
              </select>
              <button class="dec-btn" id="attacker-target-dec">-</button>
            </div>
          </div>
          <div class="input-line">
            <label for="attacker-rerolls">Rerolls</label>
            <div class="input-elements-div">
              <button class="inc-btn" id="attacker-rerolls-inc">+</button>
              <input type="number" id="attacker-rerolls" min="0" value="0"/>
              <button class="dec-btn" id="attacker-rerolls-dec">-</button>
            </div>
          </div>
        </div>
        <div id="defender-inputs">
          <h3>Defender</h3>
          <div class="input-line">
            <label for="defender-dice">Dice amount</label>
            <div class="input-elements-div">
              <button class="inc-btn" id="defender-dice-inc">+</button>
              <input type="number" id="defender-dice" min="1" value="1"/>
              <button class="dec-btn" id="defender-dice-dec">-</button>
            </div>
          </div>
          <div class="input-line">
            <label for="defender-target">Success target</label>
            <div class="input-elements-div">
              <button class="inc-btn" id="defender-target-inc">+</button>
              <select name="defender-target" id="defender-target">
                <button>
                  <selectedcontent></selectedcontent>
                </button>
                <option value="6"><span class="target-label">6+</span></option>
                <option value="5"><span class="target-label">5+</span> <span class="target-helper">(dodge)</span></option>
                <option value="4" selected><span class="target-label">4+</span> <span class="target-helper">(block)</span></option>
                <option value="3"><span class="target-label">3+</span></option>
                <option value="2"><span class="target-label">2+</span></option>
                <option value="1"><span class="target-label">1+</span></option>
              </select>
              <button class="dec-btn" id="defender-target-dec">-</button>
            </div>
          </div>
          <div class="input-line">
            <label for="defender-rerolls">Rerolls</label>
            <div class="input-elements-div">
              <button class="inc-btn" id="defender-rerolls-inc">+</button>
              <input type="number" id="defender-rerolls" min="0" value="0"/>
              <button class="dec-btn" id="defender-rerolls-dec">-</button>
            </div>
          </div>
        </div>
      </div>
      <div class="individual-input-line">
        <label for="num-simulations">Number of simulated combats</label>
        <input type="number" id="num-simulations" min="1" value="10000"/>
      </div>
      <button id="roll-btn">Roll!</button>
      <div id="data-area">
        <div class="space-filler"></div>
        <div id="chart"></div>
        <div id="results-table"></div>
      </div>
    </div>
    <div id="legal-footer">
      <p>Licensed under a <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International</a> License.</p>
      <p>This site is not endorsed by or affiliated with Games Workshop Limited.</p>
    </div>
  </div>
  <script type="module" src="/src/main.ts"></script>
</body>
</html>
